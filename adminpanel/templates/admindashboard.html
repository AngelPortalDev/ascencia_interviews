{% extends "layouts/master.html" %}

{% block content %}

<style>
    .card1:hover {
        transition: all 0.5s ease;
        transform: translateY(-3px);
    }
    .card2:hover {
        transition: all 0.5s ease;
        transform: translateY(-3px); 
    }
    .card3:hover {
        transition: all 0.5s ease;
        transform: translateY(-3px);
    }
    .card4:hover {
        transition: all 0.5s ease;
        transform: translateY(-3px);
    }
    .dashboardCard{
      height: 190px; 
      width:auto;
    }
    .text-nowrap {
    white-space: wrap !important;
}
</style>

<!-- Basic Bootstrap Table -->
<div class="container mt-3">

    <div>
        <div class="card" style="background:#566A7F;">
            
        </card>
        <div class="card-body">
            <div class="d-flex align-items-xl-center justify-content-xl-between flex-xl-row flex-column">
                <div class="mb-3 mb-xl-0">
                    <div class="d-flex align-items-center flex-wrap mb-2">
                        <h3 class="text-white me-2 mb-0">Welcome Back, {{ request.user.first_name }} {{ request.user.last_name }}</h1>
                        <a href="{% url 'profile_update' %}" class="avatar avatar-sm img-rounded bg-gray-800 dark-hover"><i class='bx bx-pencil text-white' ></i></a>
                    </div>
                    <p class="text-white mb-0">Have a Good day at work</p>
                </div>
                <!-- <p class="text-white"><i class="ti ti-refresh me-1"></i>Updated Recently on 15 Jun 2024</p> -->
            </div>
        </div>
    </div>

    <div class="row mt-3">

        <!-- Total Students Card -->
        <div class="col-lg-3 col-md-6 col-sm-12 mb-4">
          <a href="{% url 'students_list' %}?tab=all" style="text-decoration: none;">
          <div class="card shadow-md border-0 rounded-3 card1 dashboardCard">
            <div class="card-body text-white text-center py-4">
              <i class="bx bx-user-circle fs-1 mb-3" style="color:#20c2e9; background:#e4f7fc; padding:5px;border-radius:10px"></i>
              <h5 class="card-title">Total Students</h5>
              <h3 class="card-text">{{students_count}}</h3> <!-- Dynamic data can go here -->
              {% comment %} <p class="text-muted">Total students in the system</p> {% endcomment %}
            </div>
          </div>
        </a>
        </div>
    
        <!-- Verified Students -->
        <div class="col-lg-3 col-md-6 col-sm-12 mb-4">

          <a href="{% url 'students_list' %}?tab=verified" style="text-decoration: none;">
          <div class="card shadow-md border-0 rounded-3 card3 dashboardCard">
            <div class="card-body text-white text-center py-4">
              <i class="bx bx-check-circle fs-1 mb-3" style="color:#696cff; background:#e7e7ff; padding:5px;border-radius:10px"></i>
              <h5 class="card-title">Interviews Done</h5>
              <h3 class="card-text">{{verified_students_count}}</h3>
              {% comment %} <p class="text-muted">Students who received an offer</p> {% endcomment %}
            </div>
          </div>
        </a>
        </div>

        <!-- Pending Interviews -->
        <div class="col-lg-3 col-md-6 col-sm-12 mb-4">
          <a href="{% url 'students_list' %}?tab=rejected" style="text-decoration: none;">
          <div class="card shadow-md border-0 rounded-3 card2 dashboardCard" >
            <div class="card-body text-white text-center py-4">
              <i class="bx bx-hourglass fs-1 mb-3" style="color:#ffab00; background:#fff2d6; padding:5px;border-radius:10px"></i> 
              <h5 class="card-title">Pending Interviews</h5>
              <h3 class="card-text">{{pending_interviews_count}}</h3>
              {% comment %} <p class="text-muted">Students awaiting interview</p> {% endcomment %}
            </div>
          </div>
        </a>
        </div>
    
        <!-- Rejected Students -->
        <div class="col-lg-3 col-md-6 col-sm-12 mb-4">
          <a href="{% url 'students_list' %}?tab=unverified" style="text-decoration: none;">
          <div class="card shadow-md border-0 rounded-3 card3 dashboardCard">
            <div class="card-body text-white text-center py-4" style="">
              <i class="bx bx-x-circle fs-1 mb-3" style="color:#ff3a29; background:#ffe7e5; padding:5px; border-radius:10px"></i>
              <h5 class="card-title">Interviews Not Given</h5>
              <h3 class="card-text">{{rejected_students_count}}</h3>
              {% comment %} <p class="text-muted">Students who received an offer</p> {% endcomment %}
            </div>
          </div>
        </a>
        </div>
    
        

        <!-- Pass Students -->
        {% comment %} <div class="col-lg-4 col-xxl-2 col-md-4 col-sm-6 mb-4">
          <div class="card shadow-md border-0 rounded-3 card4 dashboardCard" >
            <div class="card-body text-white text-center py-4">
              <i class="bx bx-check-circle fs-1 mb-3" style="color:#4caf50; background:#e7ffe5; padding:5px;border-radius:10px"></i>
              <h5 class="card-title">Pass Students</h5>
              <h3 class="card-text">{{pass_students_count}}</h3> {% endcomment %}
              {% comment %} <p class="text-muted">Pending follow-ups</p> {% endcomment %}
            {% comment %} </div>
          </div>
        </div> {% endcomment %}
        
        <!-- Fail Students -->
        {% comment %} <div class="col-lg-4 col-xxl-2 col-md-4 col-sm-6 mb-4">
          <div class="card shadow-md border-0 rounded-3 card4 dashboardCard" >
            <div class="card-body text-white text-center py-4">
              <i class="bx bx-error-circle fs-1 mb-3" style="color:#ff9800; background:#fff3e0; padding:5px; border-radius:10px"></i>
              <h5 class="card-title">Fail Students</h5>
              <h3 class="card-text">{{fail_students_count}}</h3> {% endcomment %}
              {% comment %} <p class="text-muted">Pending follow-ups</p> {% endcomment %}
            {% comment %} </div>
          </div>
        </div> {% endcomment %}
        
    
      </div>



  <div class="card">
    {% comment %} <h5 class="card-header">Students List</h5> {% endcomment %}
    
    <div class="card-header d-flex justify-content-between align-items-center">
      <h5 class="mb-0">interview Done Students List</h5>
      <a href="{% url 'students_list' %}" class="btn btn-primary btn-sm">View All</a>
    </div>
    <div class="table-responsive text-nowrap">
      <table class="table">
        <thead>
          <tr>
            <th>Student Name</th>
            <th>Email ID</th>
            <th>Course Applied</th>
            {% comment %} <th>Interview Status</th> {% endcomment %}
            <th>Manager Assigned</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody class="table-border-bottom-0">
          
            {% for student in students_with_interview_status %}
              <tr>
                <td>
                  <div class="d-flex align-items-center">
                    <div class="avatar avatar-online">
                      <img src="/static/img/avatars/1.png" alt class="w-px-40 h-auto rounded-circle" />
                    </div>
                    <strong class="ms-2">{{ student.student.first_name }} {{ student.student.last_name }}</strong>
                  </div>
                </td>
                <td>{{ student.student.email }}</td>
                <td>{{ student.student.program }}</td>
                {% comment %} <td>
                  <span class="badge bg-label-primary me-1">{{ student.interview_status }}</span>
                </td> {% endcomment %}
                {% comment %} <td>
                  <span class="badge 
                    {% if student.interview_status == 'Pass' %} bg-label-success 
                    {% elif student.interview_status == 'Fail' %} bg-label-danger 
                    {% else %} bg-label-primary {% endif %} me-1">
                    {{ student.interview_status }}
                  </span>
                </td> {% endcomment %}
                <td>{{ student.student.student_manager_email }}</td>
                
                <td class="d-flex align-items-center">
                  <a href="{% url 'student_detail' zoho_lead_id=student.student.zoho_lead_id %}" class="btn btn-sm btn-light border me-2">
                    <i class="bx bx-show me-2"></i>
                  </a>
                  <a href="https://crm.zoho.com/crm/org{{student.crm_id}}/tab/Leads/{{ student.zoho_lead_id }}" 
                      target="_blank" 
                      class="btn btn-sm btn-primary">
                      Zoho
                  </a>
                </td>
              </tr>
            {% empty %}
              <tr>
                <td colspan="6" class="text-center">No students found.</td>
              </tr>
            {% endfor %}
          <!-- Example Row 1 -->
          {% comment %} <tr>
            <td> 
                <div class="d-flex align-items-center"> 
                    <div class="avatar avatar-online">
                        <img src="/static/img/avatars/1.png" alt class="w-px-40 h-auto rounded-circle" />
                    </div> 
                        <strong class="ms-2">John Doe</strong>
                </div>
            </td>
            <td>john@email.com</td>
            <td>Computer Science</td>
            <td><span class="badge bg-label-primary me-1">Completed</span></td>
            <td>Sarah Smith</td>
            <td>
              <div class="dropdown"> 
                <button type="button" class="btn p-0 dropdown-toggle hide-arrow" data-bs-toggle="dropdown">
                  <i class="bx bx-dots-vertical-rounded"></i>
                </button>
                <div class="dropdown-menu">
                  <a class="dropdown-item" href="javascript:void(0);"><i class="bx bx-edit-alt me-2"></i> Edit</a>
                  <a class="dropdown-item" href="javascript:void(0);"><i class="bx bx-trash me-2"></i> Delete</a>
                </div>
              </div>
            </td>
          </tr> {% endcomment %}
        </tbody>
      </table>
    </div>
  </div>
</div>




<!--/ Basic Bootstrap Table -->

{% endblock %}
